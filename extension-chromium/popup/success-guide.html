<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Browser Inspector - Success Guide</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      width: 600px;
      min-height: 500px;
      padding: 0;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Courier New', monospace;
      font-size: 13px;
      color: #333;
      background: #f8f9fa;
    }

    .header {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .header h1 {
      margin: 0 0 8px 0;
      font-size: 22px;
      font-weight: 700;
    }

    .header p {
      margin: 0;
      font-size: 14px;
      opacity: 0.95;
    }

    .content {
      padding: 20px;
      max-height: 700px;
      overflow-y: auto;
    }

    .success-banner {
      background: #d4edda;
      border: 2px solid #28a745;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      text-align: center;
    }

    .success-banner h2 {
      margin: 0 0 8px 0;
      color: #155724;
      font-size: 18px;
    }

    .success-banner p {
      margin: 0;
      color: #155724;
      font-size: 13px;
    }

    .section {
      background: white;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .section-title {
      font-size: 16px;
      font-weight: 700;
      margin: 0 0 12px 0;
      color: #2c3e50;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-subtitle {
      font-size: 13px;
      font-weight: 600;
      margin: 16px 0 8px 0;
      color: #495057;
    }

    .step {
      background: #f8f9fa;
      border-left: 4px solid #667eea;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 4px;
    }

    .step-number {
      display: inline-block;
      background: #667eea;
      color: white;
      font-weight: 700;
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 12px;
      margin-right: 8px;
    }

    .step-title {
      font-weight: 600;
      margin-bottom: 6px;
    }

    .step-content {
      color: #666;
      line-height: 1.5;
      font-size: 12px;
    }

    .code-block {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 12px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      margin: 8px 0;
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .recipe {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 4px;
    }

    .recipe-title {
      font-weight: 700;
      color: #856404;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .recipe-prompt {
      background: white;
      padding: 10px;
      border-radius: 4px;
      margin: 8px 0;
      font-style: italic;
      color: #495057;
      font-size: 12px;
    }

    .recipe-expected {
      font-size: 11px;
      color: #856404;
      margin-top: 8px;
    }

    .ide-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    .ide-tab {
      flex: 1;
      padding: 10px;
      background: #e9ecef;
      border: 2px solid transparent;
      border-radius: 6px;
      text-align: center;
      cursor: pointer;
      font-weight: 600;
      font-size: 12px;
      transition: all 0.2s;
    }

    .ide-tab:hover {
      background: #dee2e6;
    }

    .ide-tab.active {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .ide-content {
      display: none;
    }

    .ide-content.active {
      display: block;
    }

    .btn {
      display: inline-block;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      text-align: center;
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-primary:hover {
      background: #5568d3;
    }

    .btn-success {
      background: #28a745;
      color: white;
    }

    .btn-success:hover {
      background: #218838;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }

    .action-buttons .btn {
      flex: 1;
    }

    .tip-box {
      background: #e7f3ff;
      border-left: 4px solid #2196f3;
      padding: 12px;
      margin: 12px 0;
      border-radius: 4px;
      font-size: 12px;
      line-height: 1.5;
    }

    .tip-box strong {
      color: #1976d2;
      display: block;
      margin-bottom: 4px;
    }

    .highlight {
      background: #fff3cd;
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: 600;
    }

    .simulator-section {
      background: #f8f9fa;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      padding: 16px;
      margin-top: 12px;
    }

    .simulator-title {
      font-weight: 700;
      margin-bottom: 12px;
      color: #495057;
      font-size: 13px;
    }

    .simulator-demo {
      background: white;
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 10px;
    }

    .simulator-prompt {
      color: #667eea;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 12px;
    }

    .simulator-response {
      color: #28a745;
      font-size: 11px;
      line-height: 1.6;
      padding-left: 12px;
      border-left: 3px solid #28a745;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>‚úÖ MCP Server Connected!</h1>
    <p>Now let's use it with your AI assistant</p>
  </div>

  <div class="content">
    <div class="success-banner">
      <h2>üéâ All Tests Passed</h2>
      <p>Your MCP server is working perfectly. Follow the guide below to start using it.</p>
    </div>

    <!-- One-Liner Installation -->
    <div class="section">
      <h3 class="section-title">‚ö° Quick Install (Recommended)</h3>
      <p style="color: #666; font-size: 12px; margin-bottom: 16px;">
        Run this one-liner in your terminal to auto-configure your IDE:
      </p>

      <div class="step">
        <div class="step-title">
          <span class="step-number">Mac/Linux</span>
          Copy and paste into Terminal
        </div>
        <div class="step-content">
          <div class="code-block" id="bashOneLiner">curl -fsSL https://raw.githubusercontent.com/YOLOVibeCode/browser-mcp/main/scripts/install-mcp.sh | bash</div>
          <button class="btn btn-success" id="copyBashBtn" style="margin-top: 8px; width: 100%;">
            üìã Copy Mac/Linux Command
          </button>
        </div>
      </div>

      <div class="step">
        <div class="step-title">
          <span class="step-number">Windows</span>
          Copy and paste into PowerShell
        </div>
        <div class="step-content">
          <div class="code-block" id="batchOneLiner">iwr -useb https://raw.githubusercontent.com/YOLOVibeCode/browser-mcp/main/scripts/install-mcp.bat | iex</div>
          <button class="btn btn-success" id="copyBatchBtn" style="margin-top: 8px; width: 100%;">
            üìã Copy Windows Command
          </button>
        </div>
      </div>

      <div class="tip-box">
        <strong>‚ú® What this does:</strong>
        Automatically detects your OS, verifies Node.js, configures Claude Desktop or Cursor, backs up existing configs, and tests the MCP server.
      </div>

      <details style="margin-top: 12px;">
        <summary style="cursor: pointer; font-weight: 600; color: #667eea;">
          Manual Installation (Advanced)
        </summary>
        <div style="margin-top: 12px;">
          <p style="color: #666; font-size: 12px; margin-bottom: 12px;">
            Prefer to configure manually? Follow the IDE-specific instructions below:
          </p>
        </div>
      </details>
    </div>

    <!-- IDE-Specific Instructions -->
    <div class="section">
      <h3 class="section-title">üìù Manual Setup (Alternative)</h3>

      <div class="ide-tabs">
        <div class="ide-tab active" data-ide="claude">Claude Desktop</div>
        <div class="ide-tab" data-ide="cursor">Cursor IDE</div>
        <div class="ide-tab" data-ide="vscode">VS Code</div>
      </div>

      <!-- Claude Desktop Instructions -->
      <div class="ide-content active" id="claude-content">
        <div class="step">
          <div class="step-title">
            <span class="step-number">1</span>
            Locate Claude Desktop config file
          </div>
          <div class="step-content">
            On macOS: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code>
          </div>
        </div>

        <div class="step">
          <div class="step-title">
            <span class="step-number">2</span>
            Add Browser MCP Server
          </div>
          <div class="step-content">
            Add this to your config file:
            <div class="code-block">{
  "mcpServers": {
    "browser-inspector": {
      "command": "node",
      "args": [
        "/Users/xcode/Documents/YOLOProjects/browser-mcp/mcp-server/dist/index.js"
      ],
      "env": {
        "NODE_ENV": "production"
      }
    }
  }
}</div>
          </div>
        </div>

        <div class="step">
          <div class="step-title">
            <span class="step-number">3</span>
            Restart Claude Desktop
          </div>
          <div class="step-content">
            Quit Claude completely (Cmd+Q) and reopen it. The MCP server will start automatically.
          </div>
        </div>
      </div>

      <!-- Cursor IDE Instructions -->
      <div class="ide-content" id="cursor-content">
        <div class="step">
          <div class="step-title">
            <span class="step-number">1</span>
            Locate Cursor config file
          </div>
          <div class="step-content">
            On macOS: <code>~/.cursor/mcp.json</code>
          </div>
        </div>

        <div class="step">
          <div class="step-title">
            <span class="step-number">2</span>
            Add Browser MCP Server
          </div>
          <div class="step-content">
            Create or edit the file:
            <div class="code-block">{
  "mcpServers": {
    "browser-inspector": {
      "command": "node",
      "args": [
        "/Users/xcode/Documents/YOLOProjects/browser-mcp/mcp-server/dist/index.js"
      ],
      "env": {
        "NODE_ENV": "production"
      }
    }
  }
}</div>
          </div>
        </div>

        <div class="step">
          <div class="step-title">
            <span class="step-number">3</span>
            Restart Cursor
          </div>
          <div class="step-content">
            Quit Cursor completely and reopen it. The MCP server will be available in the AI chat.
          </div>
        </div>
      </div>

      <!-- VS Code Instructions -->
      <div class="ide-content" id="vscode-content">
        <div class="step">
          <div class="step-title">
            <span class="step-number">1</span>
            Install Cline Extension
          </div>
          <div class="step-content">
            Search for "Cline" in VS Code extensions and install it.
          </div>
        </div>

        <div class="step">
          <div class="step-title">
            <span class="step-number">2</span>
            Configure MCP Settings
          </div>
          <div class="step-content">
            Open Cline settings and add the MCP server configuration in the MCP servers section.
          </div>
        </div>

        <div class="tip-box">
          <strong>üí° Note:</strong>
          VS Code support varies by extension. Check the specific AI extension's documentation for MCP configuration.
        </div>
      </div>
    </div>

    <!-- Recipe Examples -->
    <div class="section">
      <h3 class="section-title">üç≥ Step 2: Real-World Debugging Recipes</h3>
      <p style="color: #666; font-size: 12px; margin-bottom: 16px;">
        These recipes show how to use browser inspection for actual development tasks:
      </p>

      <div class="recipe">
        <div class="recipe-title">üêõ Recipe 1: Debug Console Errors</div>
        <div class="recipe-prompt">
          "Read the console logs from my browser tab and help me understand any JavaScript errors"
        </div>
        <div class="recipe-expected">
          <strong>Use Case:</strong> AI reads <code>browser://tab-{url}/console/logs</code> to analyze errors, warnings, and stack traces in real-time.
        </div>
      </div>

      <div class="recipe">
        <div class="recipe-title">üé® Recipe 2: Analyze Page Structure & CSS</div>
        <div class="recipe-prompt">
          "Inspect the DOM structure of my page and tell me why this button isn't displaying correctly"
        </div>
        <div class="recipe-expected">
          <strong>Use Case:</strong> AI reads <code>browser://tab-{url}/dom/html</code> to examine HTML structure, CSS classes, and computed styles for layout issues.
        </div>
      </div>

      <div class="recipe">
        <div class="recipe-title">üåê Recipe 3: Monitor Network & API Calls</div>
        <div class="recipe-prompt">
          "Show me all network requests from this page and identify any failed API calls"
        </div>
        <div class="recipe-expected">
          <strong>Use Case:</strong> AI reads <code>browser://tab-{url}/network/requests</code> to analyze HTTP requests, responses, status codes, and performance timing.
        </div>
      </div>

      <div class="recipe">
        <div class="recipe-title">‚öõÔ∏è Recipe 4: Identify Framework & Architecture</div>
        <div class="recipe-prompt">
          "What JavaScript framework is this app built with? Analyze the code structure and component hierarchy"
        </div>
        <div class="recipe-expected">
          <strong>Use Case:</strong> AI reads <code>browser://tab-{url}/metadata/frameworks</code> to detect React, Vue, Angular, etc., and understand the app architecture.
        </div>
      </div>

      <div class="recipe">
        <div class="recipe-title">üîç Recipe 5: Match Runtime to Source Code</div>
        <div class="recipe-prompt">
          "This deployed app is throwing an error. Help me map the minified code back to the source files and locate the bug in my codebase"
        </div>
        <div class="recipe-expected">
          <strong>Use Case:</strong> AI analyzes runtime errors with stack traces, matches them to source maps, and helps locate the exact file and line in your local code.
        </div>
      </div>

      <div class="recipe">
        <div class="recipe-title">üìä Recipe 6: Generate Bug Report</div>
        <div class="recipe-prompt">
          "Create a detailed bug report for the issue I'm seeing, including all console errors, network failures, and relevant DOM state"
        </div>
        <div class="recipe-expected">
          <strong>Use Case:</strong> AI compiles a comprehensive bug report with full browser context: console logs, network activity, DOM state, and reproduction steps.
        </div>
      </div>
    </div>

    <!-- AI Simulator -->
    <div class="section">
      <h3 class="section-title">ü§ñ Step 3: See What the AI Sees</h3>
      <p style="color: #666; font-size: 12px; margin-bottom: 16px;">
        Here's a simulation of what happens when you use these recipes:
      </p>

      <div class="simulator-section">
        <div class="simulator-title">üí¨ Example Conversation</div>

        <div class="simulator-demo">
          <div class="simulator-prompt">You: "Can you list all the browser tabs you have access to?"</div>
          <div class="simulator-response">
            AI: Let me check the available browser tabs...<br><br>
            [Calls listActiveTabs tool]<br><br>
            I can see 1 active browser tab:<br>
            ‚Ä¢ Tab 1: http://localhost:3000 (Port: 3100)<br>
            ‚Ä¢ Status: Active<br>
            ‚Ä¢ Virtual filesystem available at: browser://tab-localhost-3000/
          </div>
        </div>

        <div class="simulator-demo">
          <div class="simulator-prompt">You: "What resources are available for that tab?"</div>
          <div class="simulator-response">
            AI: Let me list the available resources...<br><br>
            [Calls resources/list]<br><br>
            For this tab, I can access:<br>
            ‚Ä¢ DOM HTML (browser://tab-localhost-3000/dom/html)<br>
            ‚Ä¢ Console Logs (browser://tab-localhost-3000/console/logs)<br>
            ‚Ä¢ Network Requests (browser://tab-localhost-3000/network/requests)<br>
            ‚Ä¢ Framework Detection (browser://tab-localhost-3000/metadata/frameworks)
          </div>
        </div>

        <div class="simulator-demo">
          <div class="simulator-prompt">You: "Pin tab 1 to my current session"</div>
          <div class="simulator-response">
            AI: Let me pin that tab for you...<br><br>
            [Calls pinTab with sessionId and tabId]<br><br>
            ‚úì Tab 1 has been pinned to your session!<br>
            Now I'll focus on this tab for any browser-related requests.
          </div>
        </div>
      </div>
    </div>

    <!-- Live Test Section -->
    <div class="section">
      <h3 class="section-title">üß™ Step 4: Test It Yourself</h3>
      <p style="color: #666; font-size: 12px; margin-bottom: 16px;">
        Want to see the actual responses? Try the AI simulator with your own API key:
      </p>

      <div class="tip-box">
        <strong>üîê Optional:</strong>
        You can add your OpenAI or Anthropic API key to test the AI responses directly in this extension.
        Your key is stored locally and never sent anywhere except to the official API.
      </div>

      <div class="action-buttons">
        <button class="btn btn-secondary" id="skipSimulatorBtn">Skip for Now</button>
        <button class="btn btn-primary" id="setupSimulatorBtn">Setup AI Simulator</button>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="section">
      <h3 class="section-title">üöÄ Quick Actions</h3>

      <div class="action-buttons">
        <a href="test-popup.html" class="btn btn-secondary">‚Üê Back to Main</a>
        <a href="mcp-test.html" class="btn btn-primary">Run Tests Again</a>
      </div>

      <div style="margin-top: 16px;">
        <button class="btn btn-success" id="copyConfigBtn" style="width: 100%;">
          üìã Copy MCP Config to Clipboard
        </button>
      </div>
    </div>
  </div>

  <script src="success-guide.js"></script>
</body>
</html>
